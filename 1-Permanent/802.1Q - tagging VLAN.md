---
type: permanent
created: 2025-01-08 01:58
tags:
  - permanent
  - réseau
  - vlan
  - protocole
---

# 802.1Q tagging

> [!abstract] Concept
> Le 802.1Q est le standard IEEE pour marquer (taguer) les trames Ethernet avec un identifiant de VLAN.

## Explication

Quand plusieurs VLANs partagent un même lien physique (trunk), chaque trame doit être identifiée avec son VLAN d'origine.

**Sans tagging** : Impossible de distinguer les VLANs
**Avec tagging** : Chaque trame porte son ID de VLAN

## Structure de la trame

Le tag 802.1Q ajoute **4 octets** dans la trame Ethernet :

```
[MAC Dest][MAC Src][802.1Q Tag][Type][Données][FCS]
                    └─ 4 octets
```

**Contenu du tag** :
- **TPID** (2 octets) : 0x8100 (identifie 802.1Q)
- **TCI** (2 octets) :
  - PCP (3 bits) : Priorité
  - DEI (1 bit) : Drop Eligible
  - **VID (12 bits)** : VLAN ID (0-4095)

## VLAN ID

12 bits → **4096 VLANs possibles** (0-4095)

Valeurs réservées :
- VLAN 0 : Réservé (priorité uniquement)
- VLAN 1 : VLAN par défaut
- VLAN 4095 : Réservé

Utilisables : **VLAN 2 à 4094** = 4093 VLANs

## VLAN natif

Sur un port trunk, le **VLAN natif** est transmis **sans tag**.

Par défaut = VLAN 1 (à éviter pour sécurité)

**Problème** : Si VLAN natif différent des deux côtés du trunk
→ Problèmes de communication

## Mode Access vs Trunk

**Port Access** :
- Ne voit qu'un VLAN
- Trames **non taguées** (ajout/retrait du tag par le switch)

**Port Trunk** :
- Transporte plusieurs VLANs
- Trames **taguées** avec 802.1Q

## Transparence

Le tag 802.1Q est **transparent** pour les équipements finaux :
- PC envoie trame normale (sans tag)
- Switch en mode access ajoute le tag
- Switch de destination retire le tag
- PC reçoit trame normale

## Connexions

- [[VLAN - Virtual LAN]] - Concept utilisant 802.1Q
- [[VLAN - mode access vs trunk]] - Où le tagging est utilisé
- [[VLAN - natif untagged]] - Trame sans tag sur trunk

**Voir aussi** :
- [[ISL - Inter-Switch Link]] - Ancien protocole Cisco (obsolète)

---
**Sources** : Fiche VLANs, IEEE 802.1Q standard
